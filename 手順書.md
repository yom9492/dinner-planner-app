# 🌸 1週間夕食管理アプリ

シンプルで使いやすい夕食管理アプリです。1週間分の夕食メニューを簡単に管理できます。

## ✨ 特徴

- 📱 **スマホ対応**: PWA技術でアプリのようにインストール可能
- 🎨 **ピンクデザイン**: 可愛らしいピンク系のデザイン
- 👆 **簡単操作**: 各曜日をタップして直接入力
- 💾 **データ保存**: ブラウザに自動保存（オフラインでも動作）
- 🚀 **高速**: 軽量で快適な動作
- ♿ **アクセシブル**: キーボード操作、スクリーンリーダー対応
- 🔒 **セキュア**: XSS攻撃対策、エラーハンドリング強化
- ⌨️ **ショートカット**: Ctrl+S（保存）、Ctrl+E（エクスポート）

## 🆕 2024年版の改良点

### セキュリティ強化
- XSS（クロスサイトスクリプティング）攻撃対策
- 安全なHTMLエスケープ処理
- エラーハンドリング強化

### アクセシビリティ向上
- キーボードナビゲーション完全対応
- スクリーンリーダー対応（ARIA属性）
- フォーカス表示の改善
- スキップリンク追加

### UX（ユーザー体験）改善
- 料理候補のキーボード選択（矢印キー、Enter、Escape）
- ドラッグ&ドロップの視覚フィードバック強化
- キーボードショートカット（Ctrl+S、Ctrl+E）
- エラーメッセージの改善（トースト表示）
- デバウンス処理による入力最適化

### 機能追加
- 買い物アイテムの作成日時記録
- 献立履歴の改良（最大10件保存）
- CSVエクスポート機能の改善
- キーボードでの料理移動機能

## 📱 スマホでの使用手順

### ステップ 1: アプリを公開する

#### 方法A: GitHub Pages（推奨・無料）

1. **GitHubアカウントを作成**
   - [GitHub](https://github.com)にアクセス
   - 無料アカウントを作成

2. **新しいリポジトリを作成**
   - 「New repository」をクリック
   - リポジトリ名を入力（例: `dinner-planner`）
   - 「Public」を選択
   - 「Create repository」をクリック

3. **ファイルをアップロード**
   - 「uploading an existing file」をクリック
   - 以下のファイルをドラッグ&ドロップ：
     - `index.html`
     - `style.css`
     - `script.js`
     - `manifest.json`
     - `sw.js`
   - 「Commit changes」をクリック

4. **GitHub Pagesを有効化**
   - リポジトリの「Settings」タブを開く
   - 左メニューから「Pages」を選択
   - Source を「Deploy from a branch」に設定
   - Branch を「main」に設定
   - 「Save」をクリック

5. **アプリのURLを取得**
   - 数分後、以下のURLでアクセス可能：
   - `https://[username].github.io/[repository-name]`

#### 方法B: Netlify（簡単・無料）

1. **Netlifyにアクセス**
   - [Netlify](https://netlify.com)でアカウント作成

2. **ファイルをアップロード**
   - 「Sites」ページで「Add new site」→「Deploy manually」
   - すべてのファイルをZIPにまとめてドラッグ&ドロップ
   - 自動的にURLが生成される

### ステップ 2: スマホにインストール

#### iPhone（Safari）

1. **アプリにアクセス**
   - Safariで公開されたURLを開く

2. **ホーム画面に追加**
   - 画面下部の共有ボタン（□↑）をタップ
   - 「ホーム画面に追加」を選択
   - アプリ名を確認して「追加」をタップ

3. **アプリとして使用**
   - ホーム画面にアイコンが追加される
   - タップするとアプリのように起動

#### Android（Chrome）

1. **アプリにアクセス**
   - Chromeで公開されたURLを開く

2. **インストールプロンプト**
   - 自動的に「アプリをインストール」が表示される場合は「インストール」をタップ

3. **手動でインストール**
   - 右上の「⋮」メニューをタップ
   - 「アプリをインストール」または「ホーム画面に追加」を選択
   - 「インストール」をタップ

4. **アプリとして使用**
   - アプリドロワーまたはホーム画面にアイコンが追加される

### ステップ 3: 使い方

#### 🍽️ 基本操作

1. **夕食の入力**
   - 各曜日の欄をタップまたはEnterキー
   - 料理名を入力（候補が自動表示されます）
   - Enterキーまたは他の場所をタップで保存

2. **候補選択のキーボード操作**
   - ↑↓矢印キー: 候補を選択
   - Enter: 選択した候補を確定
   - Escape: 候補リストを閉じる

3. **夕食の削除**
   - 入力済みの料理の「×」ボタンをタップ

4. **料理の移動**
   - **ドラッグ&ドロップ**: 料理をつかんで他の曜日に移動
   - **キーボード**: 料理にフォーカスしてEnterまたはSpaceキー

#### 🛒 買い物リスト

1. **アイテム追加**
   - 入力欄に材料や調味料を入力
   - 「追加」ボタンまたはEnterキー

2. **完了マーク**
   - チェックボックスをタップして購入済みマーク

3. **アイテム削除**
   - 各アイテムの「×」ボタンをタップ

#### 💾 データ管理

1. **献立保存**
   - 「今週の献立を保存」ボタンまたはCtrl+S
   - 最大10件まで履歴保存

2. **過去の献立読み込み**
   - 履歴セクションから「読み込み」ボタン

3. **CSVエクスポート**
   - 「CSVエクスポート」ボタンまたはCtrl+E
   - 献立と買い物リストをファイル出力

4. **データクリア**
   - 「すべてクリア」ボタンで一括削除

#### ⌨️ キーボードショートカット

- **Ctrl+S** (⌘+S): 献立を保存
- **Ctrl+E** (⌘+E): CSVエクスポート
- **Tab**: 要素間の移動
- **Enter/Space**: ボタン実行、料理移動開始
- **矢印キー**: 候補選択
- **Escape**: 操作キャンセル

## 🔧 トラブルシューティング

### アプリがインストールできない

- **iPhone**: iOS 11.3以降のSafariが必要
- **Android**: Chrome 76以降が必要
- プライベートブラウジングモードでは利用不可

### データが消える

- ブラウザのデータを削除すると消える可能性があります
- 定期的にCSVエクスポートでバックアップを取ることをお勧めします
- 異なるブラウザ間ではデータは共有されません

### 動作が重い

- ブラウザを再起動してみてください
- 他のタブを閉じてメモリを解放してください
- ブラウザのキャッシュをクリアしてください

### セキュリティエラー

- HTTPSでアクセスしていることを確認してください
- 信頼できるサイトからのみ利用してください
- 不審な動作があった場合はブラウザのデータをクリアしてください

## 🛠️ カスタマイズ

### 色の変更

`style.css`の以下の部分を編集：

```css
/* メインカラー */
background: linear-gradient(135deg, #fbb6ce 0%, #f06292 100%);

/* アクセントカラー */
color: #e91e63;
```

### 曜日の変更

`script.js`の以下の部分を編集：

```javascript
const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
```

### 料理カテゴリの追加

`script.js`のcategoriesオブジェクトを編集：

```javascript
this.categories = {
    '和食': ['味噌汁', '煮物', /* ... */],
    '洋食': ['パスタ', 'ピザ', /* ... */],
    // 新しいカテゴリを追加
    '韓国料理': ['キムチ', 'ビビンバ', 'サムギョプサル']
};
```

## 🔒 セキュリティについて

このアプリは以下のセキュリティ対策を実装しています：

- **XSS攻撃対策**: ユーザー入力の適切なエスケープ処理
- **エラーハンドリング**: 不正なデータからの保護
- **データ検証**: 入力データの整合性チェック
- **ローカルストレージ保護**: 安全なデータ保存方式

## ♿ アクセシビリティについて

- **スクリーンリーダー対応**: ARIA属性による適切な読み上げ
- **キーボードナビゲーション**: マウスなしでの完全操作
- **フォーカス表示**: 現在の操作位置の明確な表示
- **色覚サポート**: 色以外の情報でも判別可能
- **スキップリンク**: メインコンテンツへの直接移動

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。自由に改変・配布できます。

## 🤝 サポート

質問や問題がある場合は、GitHubのIssuesページで報告してください。

---

**楽しい献立管理を！** 🍽️✨

## 📊 パフォーマンス向上のヒント

- 定期的にブラウザキャッシュをクリアする
- 買い物リストは適度に整理する（完了済みアイテムを削除）
- 履歴は自動的に10件に制限されるため手動削除は不要
- オフライン使用時は定期的にオンライン同期を確認する 